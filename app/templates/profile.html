{% extends "layout.html" %}
{% block content %}

<div class="container">
  <div class="row float-element">

    <div class="col-md-8">


      <div class="bm-pd-lg">
        <div class="inline-h3">
          <span class="blue h4"><strong>点评</strong></span>
          <a>（{{ num_review }}门）</a>
        </div>

        {% for review in reviews[0:3] %}
        <!-- profile页面最多显示3条点评 -->
        <div class="ud-pd-md dashed">
          <div class="ud-pd-sm">
            {% set course = review.course %}
            <a href="{{ url_for('course.view_course', course_id=course.id) }}">{{ course.name }}（{{ course.teacher.name or _('Unknown') }}）</a>
            <span class="small grey align-bottom left-pd-sm">学期：{{ course.term_display }}</span>
            <span class="text-muted small float-right">{{ review.update_time }}</span>
          </div>
          <p class="dark-grey">{{ review.content|safe }}
            <a href="{{ url_for('course.view_course', course_id=course.id,review_id=review.id) }}"> >>{{ _('more') }}</a>
          </p>
        </div>
        {% endfor %}
      </div>

      <div class="bm-pd-lg">
        <div class="inline-h3">
          <span class="blue h4"><strong>关注</strong></span>
          <a>（10门）</a>
        </div>

        {% for course in courses_following[0:6] %}
        <!-- 关注课程最多显示6门 -->
        <div class="ud-pd-md dashed">
          <a href="{{ url_for('course.view_course', course_id=course.id) }}">{{ course.name }}（{{ course.teacher.name or _('Unknown') }}）</a>
          <span class="small grey align-bottom  float-right">学期：{{ course.term_display }}</span>
        </div>
        {% endfor %}

      </div>



      <div class="bm-pd-lg">
        <div class="inline-h3">
          <span class="blue h4"><strong>学过</strong></span>
          <a>（10门）</a>
        </div>
        {% if current_user.id==user.id and current_user.info %}

        {% for course in courses_joined[0:6] %}
        <!-- 学过课程最多显示6门 -->
        <div class="ud-pd-md dashed">
          <a href="{{ url_for('course.view_course', course_id=course.id) }}">{{ course.name }}（{{ course.teacher.name or _('Unknown') }}）</a>
          <span class="small grey align-bottom  float-right">学期：{{ course.term_display }}</span>
        </div>
        {% endfor %}
        {% endif %}
      </div>



    </div><!-- end col-md-8 -->



    <div class="col-md-4 right-col">
      <img class="avatar-lg cicle" src="{{ user.avatar }}"/>
      <h3 class="blue">{{ user.username }}</h3>

      <div class="ud-pd-md dashed">
        <ul class="list-unstyled dark-grey">
          <li class="ud-pd-sm">简介：{{ user.description }}</li>
          <li class="ud-pd-sm">博客：
            <a href="{{ user.homepage }}">
              <span class="glyphicon glyphicon-link" aria-hidden="true"></span> {{ user.homepage }}
            </a>
          </li>
        </ul>
      </div>

      <div class="ud-pd-md dashed hidden">
        <ul class="list-unstyled dark-grey">
          <li class="ud-pd-sm">关注：</li>
          <li class="ud-pd-sm">被关注：</li>
        </ul>
      </div>



    </div><!-- end col-md-4 -->
  </div><!-- end float-element -->
</div><!-- end container -->
{% endblock %}
